fragment UserFields on User {
  id
  username
  name
  lastName
  image
  email
  encodedPermissions
  lastOnlineAt
  createdAt
}

mutation Login(
  $username: String!
  $password: String!
) {
  login(username: $username, password: $password) {
    accessToken
    refreshToken
  }
}

mutation Signup(
  $username: String!
  $password: String!
  $email: String!
  $name: String!
) {
  signup(username: $username, password: $password, email: $email, name: $name)
}

mutation Refresh(
  $refreshToken: String!
) {
  refresh(token: $refreshToken) {
    accessToken
    refreshToken
  }
}

mutation EditUser(
  $input: UserInput!
) {
  editUser(user: $input) {
    id
  }
}

mutation EditMe(
  $name: String!
  $lastName: String
  $image: String
) {
  editUser(user: {
    name: $name
    lastName: $lastName
    image: $image
  }) {
    name
    lastName
    image
  }
}

mutation ChangePassword(
  $oldPassword: String!
  $newPassword: String!
) {
  changePassword(oldPassword: $oldPassword, newPassword: $newPassword)
}

mutation ResetPassword(
  $id: String!
) {
  resetPassword(id: $id)
}

mutation DeleteAccount(
  $id: String!
) {
  deleteAccount(id: $id)
}

query GetUsers(
  $username: String
  $offset: Int!
  $limit: Int!
) {
  users(username: $username, offset: $offset, limit: $limit) {
    total
    users {
      ...UserFields
    }
  }
}

query Stats {
  totalUsers
  activeUsers
  recentlyCreatedUsers
}

query Me {
  me {
    ...UserFields
  }
}
